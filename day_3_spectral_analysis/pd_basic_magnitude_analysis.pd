#N canvas 570 507 750 569 12;
#X obj 17 14 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 17 34 openpanel;
#X obj 91 34 table sample;
#X obj 396 43 tabplay~ sample;
#X msg 17 58 read -resize \$1 sample;
#X obj 17 82 soundfiler;
#X obj 396 19 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 237 54 \; pd dsp \$1;
#X obj 237 12 loadbang;
#X obj 237 34 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X msg 335 17 stop;
#X obj 396 68 s~ analysisInput;
#X msg 342 68 0;
#X obj 342 91 s restartArray;
#X obj 205 190 r~ analysisInput;
#N canvas 470 219 565 454 hann-window 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array hanningWindow 64 float 0;
#X coords 0 1 63 0 300 100 1;
#X restore 82 311 graph;
#X obj 438 165 osc~;
#X obj 438 190 *~ -0.5;
#X obj 438 214 +~ 0.5;
#X obj 38 183 /;
#X obj 127 152 samplerate~;
#X obj 38 261 s window-sec;
#X obj 177 214 swap;
#X obj 177 238 /;
#X obj 177 262 s window-hz;
#X obj 49 211 * 1000;
#X obj 49 238 s window-msec;
#X obj 38 115 t f b f;
#X obj 390 105 r window-hz;
#X msg 442 130 0;
#X obj 390 131 t f b;
#X text 15 8 calculate Hann window table (variable window size) and
constants window-hz (fundamental frequency of analysis) \, window-sec
and window-msec (analysis window size in seconds and msec).;
#X obj 391 247 tabwrite~ hanningWindow;
#X msg 213 142 \; hanningWindow resize \$1;
#X obj 38 88 r windowSize;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 17 0;
#X connect 4 0 6 0;
#X connect 4 0 10 0;
#X connect 5 0 4 1;
#X connect 5 0 7 1;
#X connect 7 0 8 0;
#X connect 7 1 8 1;
#X connect 8 0 9 0;
#X connect 10 0 11 0;
#X connect 12 0 4 0;
#X connect 12 0 7 0;
#X connect 12 1 5 0;
#X connect 12 2 18 0;
#X connect 13 0 15 0;
#X connect 14 0 1 1;
#X connect 15 0 1 0;
#X connect 15 1 14 0;
#X connect 15 1 17 0;
#X connect 19 0 12 0;
#X restore 18 196 pd hann-window;
#X obj 18 114 loadbang;
#X obj 18 173 s windowSize;
#X obj 277 344 f;
#X obj 277 367 + 1;
#X obj 277 410 %;
#X floatatom 277 459 10 0 0 0 - - -, f 10;
#X obj 313 383 r restartArray;
#X obj 277 436 tabread magnitude;
#N canvas 1185 278 511 363 fftAnalysis 0;
#X obj 42 41 inlet~;
#X obj 42 96 *~;
#X obj 111 56 tabreceive~ hanningWindow;
#X obj 42 121 rfft~;
#X obj 42 186 *~;
#X obj 73 186 *~;
#X obj 42 219 +~;
#X obj 130 306 sqrt~;
#X obj 130 331 outlet~;
#X obj 110 155 rifft~;
#X obj 148 216 *~;
#X obj 130 274 +~;
#X obj 147 191 /~;
#X obj 165 153 r windowSize;
#X msg 195 184 set \$1 4;
#X obj 195 216 block~ 64 4;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 1 1;
#X connect 3 0 4 0;
#X connect 3 0 4 1;
#X connect 3 0 9 0;
#X connect 3 1 5 0;
#X connect 3 1 5 1;
#X connect 3 1 9 1;
#X connect 4 0 6 0;
#X connect 5 0 6 1;
#X connect 6 0 11 0;
#X connect 7 0 8 0;
#X connect 9 0 12 0;
#X connect 10 0 11 1;
#X connect 11 0 7 0;
#X connect 12 0 10 0;
#X connect 12 0 10 1;
#X connect 13 0 12 1;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X restore 205 215 pd fftAnalysis;
#X obj 277 270 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 215 242 tabsend~ magnitude;
#X obj 322 321 r windowSize;
#X obj 315 215 table magnitude;
#X text 203 165 // fft mags, f 18;
#X obj 204 340 print~;
#X floatatom 356 411 5 0 0 0 - - -, f 5;
#X obj 277 293 metro 100;
#X msg 18 145 64;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 3 0 11 0;
#X connect 3 1 6 0;
#X connect 3 1 12 0;
#X connect 4 0 5 0;
#X connect 6 0 3 0;
#X connect 8 0 9 0;
#X connect 9 0 7 0;
#X connect 10 0 3 0;
#X connect 12 0 13 0;
#X connect 14 0 24 0;
#X connect 16 0 33 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 19 0 18 1;
#X connect 20 0 23 0;
#X connect 20 0 31 0;
#X connect 22 0 20 0;
#X connect 23 0 21 0;
#X connect 24 0 26 0;
#X connect 24 0 30 0;
#X connect 25 0 32 0;
#X connect 27 0 20 1;
#X connect 32 0 18 0;
#X connect 33 0 17 0;
